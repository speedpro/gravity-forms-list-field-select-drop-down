function SetFieldChoicesList(e,i){var o="",_=new Array({value:"First Choice",text:"First Choice"},{value:"Second Choice",text:"Second Choice"},{value:"Third Choice",text:"Third Choice"}),t="undefined"!=typeof field.enableColumns&&field.enableColumns?"multi":"single";if("multi"==t){var e=field.choices[i],n="undefined"==typeof e.isDropDownChoices?_:e.isDropDownChoices,d="undefined"!=typeof e.isDropDownEnableChoiceValue&&e.isDropDownEnableChoiceValue?!0:!1;if(n.length||(n=_,field.choices[i].isDropDownChoices=_),"string"==typeof n){var n=itsg_gf_list_drop_down_maybe_string_to_array(n);field.choices[i].isDropDownChoices=n}}else{var n="undefined"==typeof field.itsg_list_field_drop_down_options?_:field.itsg_list_field_drop_down_options,d="undefined"!=typeof field.isDropDownEnableChoiceValue&&field.isDropDownEnableChoiceValue?!0:!1;if(n.length||(n=_,field.field.itsg_list_field_drop_down_options=_),"string"==typeof n){var n=itsg_gf_list_drop_down_maybe_string_to_array(n);field.itsg_list_field_drop_down_options=n}}console.log(n);for(var s=0;s<n.length;s++){var l=d?String(n[s].value):String(n[s].text),c=String(n[s].text),r="list_choice_drop_down";o+="<li class='field-choice-row-drop-down' data-input_type='"+r+"' data-index='"+s+"'>",o+="<input type='text' id='"+r+"_choice_text_"+s+"' value=\""+c.replace(/"/g,"&quot;")+"\" class='field-choice-input-dropdown field-choice-text' onblur=\"SetFieldChoiceDropDown( "+i+' );" />',o+="<input type='text' id='"+r+"_choice_value_"+s+"' value=\""+l.replace(/"/g,"&quot;")+"\" class='field-choice-input-dropdown field-choice-value' onblur=\"SetFieldChoiceDropDown( "+i+' );" />',o+="<a class='gf_insert_field_choice' onclick=\"InsertFieldChoiceisDropDown( "+i+","+s+');" onkeypress="InsertFieldChoiceisDropDown( '+i+","+s+");\"><i class='gficon-add'></i></a>",n.length>1&&(o+="<a class='gf_delete_field_choice' onclick=\"DeleteFieldChoiceisDropDown( "+i+","+s+');" onkeypress="DeleteFieldChoiceisDropDown( '+i+","+s+");\"><i class='gficon-subtract'></i></a>"),o+="</li>"}var t="undefined"!=typeof field.enableColumns&&field.enableColumns?"multi":"single";"single"==t&&(i="single"),jQuery(".choices_setting_"+i+" #field_choices_"+i).html(o);var p=n.length;1==p?jQuery("#field_choices_"+i+" .gf_delete_field_choice").hide():jQuery("#field_choices_"+i+" .gf_delete_field_choice").show()}function itsg_gf_list_drop_down_maybe_string_to_array(e){if("string"==typeof e){for(var e=e.replace("\\,","ITSG_TEMP_DELIM"),e=e.split(","),i=[],o=0;o<e.length;o++){var _=e[o].replace("ITSG_TEMP_DELIM",",");i.push({value:_,text:_})}e=i}return e}function InsertFieldChoiceisDropDown(e,i){var o={value:"",text:""},_="undefined"!=typeof field.enableColumns&&field.enableColumns?"multi":"single";if("multi"==_){var t=field.choices[e],n="undefined"==typeof t.isDropDownChoices?o:t.isDropDownChoices;n=itsg_gf_list_drop_down_maybe_string_to_array(n),n.splice(i+1,0,o),SetFieldChoicesList(field.choices[e],e)}else{var n="undefined"==typeof field.itsg_list_field_drop_down_options?o:field.itsg_list_field_drop_down_options;n=itsg_gf_list_drop_down_maybe_string_to_array(n),console.log(i),console.log(o),n.splice(i+1,0,o),SetFieldChoicesList(field,e)}}function DeleteFieldChoiceisDropDown(e,i){var o="undefined"!=typeof field.enableColumns&&field.enableColumns?"multi":"single";if("multi"==o){var _=field.choices[e],t="undefined"==typeof _.isDropDownChoices?"":_.isDropDownChoices;t=itsg_gf_list_drop_down_maybe_string_to_array(t),t.splice(i,1),SetFieldChoicesList(field.choices[e],e)}else{var t="undefined"==typeof field.itsg_list_field_drop_down_options?"":field.itsg_list_field_drop_down_options;t=itsg_gf_list_drop_down_maybe_string_to_array(t),t.splice(i,1),SetFieldChoicesList(field,e)}}function SetFieldChoiceDropDown(e){var i="undefined"!=typeof field.enableColumns&&field.enableColumns?"multi":"single";"single"==i&&(e="single");var o=jQuery("#list_choice_dropdown_enable_"+e).is(":checked"),_=jQuery("#list_choice_dropdown_enhanced_"+e).is(":checked"),t=jQuery("#list_choice_dropdown_enhanced_other_"+e).is(":checked"),n=jQuery("#list_choice_values_enabled_"+e).is(":checked");field=GetSelectedField();var d=[];if(jQuery(".choices_setting_"+e+" li.field-choice-row-drop-down").each(function(){var e=jQuery(this).find("input.field-choice-text").val(),i=jQuery(this).find("input.field-choice-value").val();d.push({value:i,text:e})}),"multi"==i){var s=field.choices[e];s.isDropDown=o,s.isDropDownChoices=d,s.isDropDownEnhanced=_,s.isDropDownEnhancedOther=t,s.isDropDownEnableChoiceValue=n}else field.itsg_list_field_drop_down=o,field.itsg_list_field_drop_down_options=d,field.itsg_list_field_drop_down_enhanced=_,field.list_choice_drop_down_enhanced_other=t,field.isDropDownEnableChoiceValue=n;LoadBulkChoices(field),UpdateFieldChoices(GetInputType(field)),itsg_gf_list_drop_down_preview(field),itsg_gf_list_drop_down_displayed_options(e)}function itsg_gf_list_drop_down_preview(e){setTimeout(function(){if(e.enableColumns)for(var i=0;i<e.choices.length;i++){var o=jQuery("#list_choice_dropdown_enable_"+i).is(":checked");if(o){var _=jQuery('<select style="width:100%" disabled="">'),t=i+1;jQuery("li#field_"+e.id+" table.gfield_list_container tbody tr td:nth-child("+t+")").html(_)}}else{var o=e.itsg_list_field_drop_down;if(o)var _=jQuery('<td><select style="width:100%" disabled=""></td>');else var _=jQuery('<td><input type="text" style="width:100%" disabled=""></td>');jQuery("li#field_"+e.id+" table.gfield_list_container tbody tr select").remove(),jQuery("li#field_"+e.id+" table.gfield_list_container tbody tr input").remove(),jQuery("li#field_"+e.id+" table.gfield_list_container tbody tr").prepend(_)}},50)}function itsg_gf_list_drop_down_displayed_options(e){var i=(jQuery("#list_choice_dropdown_enable_"+e).is(":checked"),jQuery("#list_choice_dropdown_enhanced_"+e).is(":checked")),o=jQuery("#list_choice_values_enabled_"+e).is(":checked"),_=jQuery('label[for="list_choice_dropdown_enhanced_other_'+e+'"]'),t=jQuery("#list_choice_dropdown_enhanced_other_"+e);i?(_.show(),_.addClass("inline"),t.show()):(_.hide(),_.removeClass("inline"),t.hide()),o?jQuery(".choices_setting_"+e).addClass("choice_with_value"):jQuery(".choices_setting_"+e).removeClass("choice_with_value")}function itsg_gf_list_drop_down_init(){setTimeout(function(){itsg_gf_list_drop_down_preview(field);var e=GetInputType(field);if("list"==e)if(field.enableColumns){jQuery(".list_drop_down_settings").hide();for(var i=0;i<field.choices.length;i++){var o=field.choices[i].isDropDown;if(o){if(!jQuery("#list_choice_dropdown_options .choices_setting_"+i).length){var _=jQuery(".choices_setting").first().prop("outerHTML").replace(/"choices_setting/g,'"choices_setting_'+i).replace(/"field_choices"/g,"'field_choices_"+i+"' data-index='"+i+"'").replace("gfield_settings_choices_container","gfield_settings_choices_container_"+i).replace("ToggleChoiceValue();","").replace("SetFieldChoices();","").replace("SetFieldProperty('enableChoiceValue', this.checked)","SetFieldChoiceDropDown("+i+")").replace(/"field_choice_values_enabled"/g,"list_choice_values_enabled_"+i);jQuery(".list_choice_dropdown_options_"+i).prepend(_),jQuery(".choices_setting_"+i+" a.gf_tooltip").remove(),jQuery(".choices_setting_"+i).find("#gfield_bulk_add").prev("input[type=button]").remove(),jQuery(".choices_setting_"+i).find("#gfield_bulk_add").remove(),SetFieldChoicesList(field.choices[i],i),jQuery(".choices_setting_"+i).show()}jQuery(".list_choice_dropdown_options_"+i).show();var o="undefined"!=typeof field.choices[i].isDropDown?field.choices[i].isDropDown:!1,t="undefined"!=typeof field.choices[i].isDropDownChoices?field.choices[i].isDropDownChoices:"",n="undefined"!=typeof field.choices[i].isDropDownEnhanced?field.choices[i].isDropDownEnhanced:!1,d="undefined"!=typeof field.choices[i].isDropDownEnhancedOther?field.choices[i].isDropDownEnhancedOther:!1,s="undefined"!=typeof field.choices[i].isDropDownEnableChoiceValue?field.choices[i].isDropDownEnableChoiceValue:!1;jQuery("#field_columns #list_choice_dropdown_enable_"+i).prop("checked",o),jQuery("#field_columns #list_choice_dropdown_options_"+i).val(t),jQuery("#field_columns #list_choice_dropdown_enhanced_"+i).prop("checked",n),jQuery("#field_columns #list_choice_dropdown_enhanced_other_"+i).prop("checked",d),jQuery("#field_columns #list_choice_values_enabled_"+i).prop("checked",s),itsg_gf_list_drop_down_displayed_options(i)}else jQuery(".list_choice_dropdown_options_"+i).hide()}}else{jQuery(".list_drop_down_settings").show();var i=0,o="undefined"!=typeof field.itsg_list_field_drop_down?field.itsg_list_field_drop_down:!1,t="undefined"!=typeof field.itsg_list_field_drop_down_options?field.itsg_list_field_drop_down_options:"",n="undefined"!=typeof field.itsg_list_field_drop_down_enhanced?field.itsg_list_field_drop_down_enhanced:!1,d="undefined"!=typeof field.list_choice_drop_down_enhanced_other?field.list_choice_drop_down_enhanced_other:!1,s="undefined"!=typeof field.isDropDownEnableChoiceValue?field.isDropDownEnableChoiceValue:!1;if(jQuery("#field_settings .list_drop_down_settings #list_choice_dropdown_enable_single").prop("checked",o),jQuery("#field_settings .list_drop_down_settings #list_choice_dropdown_options_single").val(t),jQuery("#field_settings .list_drop_down_settings #list_choice_dropdown_enhanced_single").prop("checked",n),jQuery("#field_settings .list_drop_down_settings #list_choice_dropdown_enhanced_other_single").prop("checked",d),jQuery("#field_settings .list_drop_down_settings #list_choice_values_enabled_single").prop("checked",s),o){if(!jQuery("#list_choice_dropdown_options .choices_setting_"+i).length){var _=jQuery(".choices_setting").first().prop("outerHTML").replace(/"choices_setting/g,'"choices_setting_'+i).replace(/"field_choices"/g,"'field_choices_"+i+"' data-index='"+i+"'").replace("gfield_settings_choices_container","gfield_settings_choices_container_"+i).replace("ToggleChoiceValue();","").replace("SetFieldChoices();","").replace("SetFieldProperty('enableChoiceValue', this.checked)","SetFieldChoiceDropDown("+i+")").replace(/"field_choice_values_enabled"/g,"list_choice_values_enabled_"+i);jQuery(".list_choice_dropdown_options_"+i).prepend(_),jQuery(".choices_setting_"+i+" a.gf_tooltip").remove(),jQuery(".choices_setting_"+i).find("#gfield_bulk_add").prev("input[type=button]").remove(),jQuery(".choices_setting_"+i).find("#gfield_bulk_add").remove(),SetFieldChoicesList(field,i),jQuery(".choices_setting_"+i).show()}jQuery("#list_drop_down_options").show(),itsg_gf_list_drop_down_displayed_options("single")}else jQuery("#list_drop_down_options").hide()}},50)}var text_drop_down_columns=itsg_listdropdown_admin_js_settings.text_drop_down_columns,text_drop_down_columns_instructions=itsg_listdropdown_admin_js_settings.text_drop_down_columns_instructions,text_make_drop_down=itsg_listdropdown_admin_js_settings.text_make_drop_down,text_drop_down_options=itsg_listdropdown_admin_js_settings.text_drop_down_options,text_enable_enhanced=itsg_listdropdown_admin_js_settings.text_enable_enhanced,text_enable_add_options=itsg_listdropdown_admin_js_settings.text_enable_add_options;!function(e){var i=e.GetFieldChoices;e.GetFieldChoices=function(){if(str=i.apply(this,[field]),void 0==field.choices)return"";for(var e=0;e<field.choices.length;e++){var o=GetInputType(field),_=field.choices[e].isDropDown?"checked":"",t=field.choices[e].isDropDownEnhanced?"checked":"",n=field.choices[e].isDropDownEnhancedOther?"checked":"",d=field.enableChoiceValue?String(field.choices[e].value):field.choices[e].text;"list"==o&&(0==e&&(str+="<p><strong>"+text_drop_down_columns+"</strong><br>"+text_drop_down_columns_instructions+"</p>"),str+="<div id ='list_choice_dropdown_options' >",str+="<input type='checkbox' name='choice_dropdown_enable' id='list_choice_dropdown_enable_"+e+"' "+_+' onclick="SetFieldChoiceDropDown( '+e+' );itsg_gf_list_drop_down_init();" /> ',str+="<label class='inline' for='list_choice_dropdown_enable_"+e+"'>"+d+" - "+text_make_drop_down+"</label>",str+="<div style='display:none; background: rgb(244, 244, 244) none repeat scroll 0px 0px; padding: 10px; border-bottom: 1px solid grey; margin: 10px 0;' class='list_choice_dropdown_options_"+e+"'>",str+="<br>",str+="<input type='checkbox' name='choice_dropdown_enhanced' id='list_choice_dropdown_enhanced_"+e+"' "+t+' onclick="SetFieldChoiceDropDown( '+e+' );itsg_gf_list_drop_down_init();"  >',str+="<label class='inline' for='list_choice_dropdown_enhanced_"+e+"'>",str+=text_enable_enhanced+"</label>",str+="<br>",str+="<input type='checkbox' name='choice_dropdown_enhanced_other' id='list_choice_dropdown_enhanced_other_"+e+"' "+n+' onclick="SetFieldChoiceDropDown( '+e+' );"  >',str+="<label class='inline' for='list_choice_dropdown_enhanced_other_"+e+"'>",str+=text_enable_add_options+"</label>",str+="</div>",str+="</div>")}return itsg_gf_list_drop_down_init(),str}}(window||{}),jQuery(document).on("change","#gfield_settings_columns_container #field_columns li",function(){itsg_gf_list_drop_down_init()}),jQuery(document).on("change","#field_settings input[id=field_columns_enabled]",function(){itsg_gf_list_drop_down_init()}),jQuery(document).bind("gform_load_field_settings",function(e,i,o){itsg_gf_list_drop_down_init()});